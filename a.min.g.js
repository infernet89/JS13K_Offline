var canvas,canvasW,canvasH,ctx,activeTask,level,DEBUG=0,TO_RADIANS=Math.PI/180,animationProgress=0,solutionObject=null,randomPlaces=null,mousex=-100,mousey=-100,dragging=!1;canvas=document.getElementById("g"),ctx=canvas.getContext("2d"),canvasW=canvas.width=1200,canvasH=canvas.height=800,maxDistance=Math.sqrt(canvasW*canvasW+canvasH*canvasH)/4,maxIntensity=7;var randomWords=["absurd","anomaly","bandit","banjo","boiler","bone","book","bottle","breakfast","bridge","broker","card","cat","center","contract","cheese","club","dog","egg","error","experiment","explosion","female","fish","fungus","fusion","game","giraffe","glitch","horse","iceman","infuse","internet","jumper","keyboard","king","lawyer","letter","limit","lobster","man","meatball","message","metal","mouse","movie","mumble","normal","nugget","pancake","phobos","piece","rabbit","random","savage","scream","secure","ship","speed","stasis","sister","substance","table","test","theatre","thing","trip","twist","title","watermelon","wild","zombie"],randomWordForRandom=[];randomWords.forEach(function(t){6==t.length&&randomWordForRandom.push(t)});var timeObject,loveObject,friendObject,movableObjects,oldmousex,oldmousey,cannotSolve,prevMousex,menuFirstWord="game",menuSecondWord="random",menuThirdWord="title",selectedObject=null,inputDelay=0,prevMousey=-1,repetition=0,carPossibilities=[];function generateLevel(){if(cannotSolve=!1,animationProgress=0,(solutionObject=new Object).hasRectangle=!0,solutionObject.isCircle=!1,solutionObject.offsetY=0,solutionObject.alpha=1,solutionObject.color="#0F0",0==level)animationProgress=1,solutionObject.sizeX=60,solutionObject.sizeY=60,solutionObject.x=canvasW/2-30,solutionObject.y=canvasH-120;else if(1==level)for(solutionObject.sizeX=300,solutionObject.sizeY=65,solutionObject.x=455,solutionObject.y=450,solutionObject.alpha=.6,solutionObject.hasRectangle=!1,movableObjects=[],i=0;i<32;i++)tmp=new Object,tmp.x=rand(0,canvasW),tmp.y=rand(0,canvasH),tmp.dx=rand(-10,10),tmp.dy=rand(-10,10),tmp.stoppingDelay=rand(0,300),tmp.char="🧠",movableObjects.push(tmp);else if(2==level){for(repetition=0,solutionObject.sizeX=45,solutionObject.sizeY=45,solutionObject.x=100,solutionObject.y=100,solutionObject.dx=rand(-9,9),solutionObject.dy=rand(-9,9),solutionObject.offsetY=-15,solutionObject.isCircle=!0,solutionObject.hasRectangle=!1,solutionObject.alpha=1,movableObjects=[],i=0;i<16;i++)tmp=new Object,tmp.x=rand(50,canvasW-50),tmp.y=rand(50,canvasH-50),tmp.dx=0,tmp.dy=0,i%3==0?(tmp.kind="time",tmp.color="#880"):i%3==1?(tmp.kind="friend",tmp.color="#4267b2"):(tmp.kind="love",tmp.color="#800"),movableObjects.push(tmp);animationProgress=-20}else if(3==level){var t=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;for(solutionObject.sizeX=40,solutionObject.sizeY=40,solutionObject.x=10,solutionObject.y=80,solutionObject.offsetY=-22,solutionObject.hasRectangle=!1,randomPlaces=[],i=0;i<canvasW/40;i++)for(randomPlaces[i]=[],k=0;k<canvasH/40-5;k++)randomPlaces[i][k]=new Object,randomPlaces[i][k].char=t?"FIREFOXISBROKEN".charAt((i+k)%15):String.fromCharCode(rand(33,255)),r=rand(0,2),2==r?randomPlaces[i][k].color="#FFF":1==r?randomPlaces[i][k].color="#F00":randomPlaces[i][k].color="#0F0";r=rand(0,2),2==r?solutionObject.color="#FFF":1==r?solutionObject.color="#F00":solutionObject.color="#0F0",solX=rand(0,canvasW/40-1),solY=rand(0,canvasH/40-6),randomPlaces[solX][solY].char="",solutionObject.x=40*solX,solutionObject.y=canvasH-40*solY-10}else if(4==level)for(solutionObject.sizeX=100,solutionObject.sizeY=100,solutionObject.x=-90950,solutionObject.y=600,solutionObject.offsetY=15,solutionObject.isCircle=!0,solutionObject.hasRectangle=!1,solutionObject.alpha=1,solutionObject.color="#0A0",movableObjects=[],carPossibilities=["🚗","🚋","🚐","🚑","🚒","🚓","🚕","🚙","🚚","🚛","🚜"],i=0;i<8;i++)tmp=new Object,tmp.x=rand(0,canvasW),tmp.y=canvasH-10-20*i,tmp.dx=rand(-20,20),tmp.char=carPossibilities[rand(0,carPossibilities.length-1)],movableObjects.push(tmp);else if(5==level)for(solutionObject.sizeX=100,solutionObject.sizeY=100,solutionObject.x=550,solutionObject.y=500,solutionObject.offsetY=15,solutionObject.isCircle=!0,solutionObject.hasRectangle=!1,solutionObject.alpha=1,solutionObject.color="#FFF",movableObjects=[],i=0;i<9;i++)tmp=new Object,tmp.x=rand(100,canvasW-100),tmp.y=rand(100,canvasH-100),0==i?tmp.color="#A00":1==i?tmp.color="#0A0":2==i?tmp.color="#00A":3==i?tmp.color="#0AA":4==i?tmp.color="#A0A":5==i?tmp.color="#AA0":6==i?tmp.color="#A70":7==i?tmp.color="#A07":8==i&&(tmp.color="#7A0"),tmp.sizeX=50,tmp.sizeY=50,tmp.alpha=.8,movableObjects.push(tmp);else 6==level?(animationProgress=1,solutionObject.sizeX=60,solutionObject.sizeY=60,solutionObject.x=canvasW/2-30,solutionObject.y=canvasH-120,movableObjects=[],tmp=new Object,tmp.x=510,tmp.y=225,tmp.sizeX=170,tmp.sizeY=60,movableObjects.push(tmp),cannotSolve=!0):7==level?(movableObjects=[],solutionObject.x=-9999,solutionObject.sizeX=100,solutionObject.sizeY=100,solutionObject.offsetY=15,solutionObject.isCircle=!0,solutionObject.hasRectangle=!1,solutionObject.alpha=0,tmp=new Object,tmp.x=250,tmp.y=250,tmp.sizeX=150,tmp.sizeY=300,tmp.isClosed=!0,movableObjects.push(tmp),tmp=new Object,tmp.x=500,tmp.y=250,tmp.sizeX=150,tmp.sizeY=300,tmp.isClosed=!0,movableObjects.push(tmp),tmp=new Object,tmp.x=750,tmp.y=250,tmp.sizeX=150,tmp.sizeY=300,tmp.isClosed=!0,movableObjects.push(tmp)):8==level?(solutionObject.sizeX=45,solutionObject.sizeY=45,solutionObject.x=-100,solutionObject.y=-100,solutionObject.offsetY=-15,solutionObject.isCircle=!0,solutionObject.hasRectangle=!1,solutionObject.alpha=1):9==level&&(solutionObject.sizeX=45,solutionObject.sizeY=45,solutionObject.x=canvasW/2,solutionObject.y=canvasH/2,solutionObject.offsetY=-15,solutionObject.isCircle=!0,solutionObject.hasRectangle=!1,solutionObject.alpha=1,inputDelay=50)}function drawSolutionPoint(t){for(ctx.save(),ctx.globalAlpha=t.alpha,ctx.fillStyle=t.color,t.hasRectangle&&(ctx.fillRect(t.x,t.y,t.sizeX,2),ctx.fillRect(t.x,t.y-t.sizeY,t.sizeX,2),ctx.fillRect(t.x,t.y-t.sizeY,2,t.sizeY),ctx.fillRect(t.x+t.sizeX,t.y-t.sizeY,2,t.sizeY+2)),t.isCircle&&(ctx.beginPath(),ctx.arc(t.x+t.sizeX/2,t.y-t.sizeY/2,t.sizeX/2,0,2*Math.PI,!1),ctx.fill(),ctx.lineWidth=.5,ctx.strokeStyle=t.color,ctx.stroke(),ctx.closePath()),t.isCircle&&(ctx.fillStyle="#000"),ctx.beginPath(),ctx.arc(t.x+t.sizeX/2,t.y-25-t.offsetY,5,0,2*Math.PI,!1),ctx.fill(),ctx.lineWidth=.5,t.isCircle?ctx.strokeStyle="#000":ctx.strokeStyle=t.color,ctx.stroke(),ctx.closePath(),i=0;i<5;i++)ctx.beginPath(),ctx.arc(t.x+t.sizeX/2,t.y-25-t.offsetY,5+5*i,230*TO_RADIANS,310*TO_RADIANS,!1),ctx.lineWidth=1,t.isCircle?ctx.strokeStyle="#000":ctx.strokeStyle=t.color,ctx.stroke(),ctx.closePath();ctx.restore()}function drawHUD(t){for(distance=Math.sqrt((mousex-t.x-t.sizeX/2)*(mousex-t.x-t.sizeX/2)+(mousey-t.y+t.sizeY/2)*(mousey-t.y+t.sizeY/2)),distance=maxIntensity-maxIntensity*(distance/maxDistance),ctx.save(),ctx.translate(canvasW-30,20),distance<-3?ctx.fillStyle="#F00":distance>maxIntensity-.8?ctx.fillStyle="#0F0":ctx.fillStyle="#FFF",ctx.beginPath(),ctx.moveTo(2,0),ctx.lineTo(0,-3),ctx.lineTo(2,-3),ctx.lineTo(2,-10),ctx.lineTo(4,-10),ctx.lineTo(4,0),ctx.lineTo(2,0),ctx.lineWidth=1,ctx.moveTo(5,-10),ctx.lineTo(9,-7),ctx.lineTo(7,-7),ctx.lineTo(7,0),ctx.lineTo(5,0),ctx.lineWidth=1,ctx.fill(),ctx.closePath(),ctx.fillStyle="#FFF",i=0;i<distance;i++)ctx.fillRect(10+2*i,0,1,-3-i);if(ctx.restore(),ctx.fillStyle="#FFF",ctx.font="12px Arial",navigator.onLine){var e=new Date,o=e.getHours(),l=e.getMinutes(),s=e.getSeconds();l=l<10?"0"+l:l,s=s<10?"0"+s:s,ctx.fillText(o+":"+l+":"+s,5,15)}else ctx.fillText("Offline",5,15)}function run(){if(inputDelay>0&&(inputDelay--,dragging=!1),ctx.clearRect(0,0,canvasW,canvasH),ctx.fillStyle="#000",ctx.fillRect(0,0,canvasW,canvasH),ctx.fillStyle="#FFF",ctx.fillRect(0,0,canvasW,1),ctx.fillRect(0,canvasH-1,canvasW,1),ctx.fillRect(0,0,1,canvasH),ctx.fillRect(canvasW-1,0,1,canvasH),0==level){if(drawSolutionPoint(solutionObject),++animationProgress%100==0&&(menuFirstWord=randomWords[rand(0,randomWords.length-1)],menuSecondWord=randomWordForRandom[rand(0,randomWordForRandom.length-1)],menuThirdWord=randomWords[rand(0,randomWords.length-1)]),Math.round(animationProgress/10)%10==9){var t="abcdefghijklmnopqrstuvwxyz";r=rand(4,10),menuFirstWord=Array(r).join().split(",").map(function(){return t.charAt(Math.floor(Math.random()*t.length))}).join(""),r=6,menuSecondWord=Array(r).join().split(",").map(function(){return t.charAt(Math.floor(Math.random()*t.length))}).join(""),r=rand(4,10),menuThirdWord=Array(r).join().split(",").map(function(){return t.charAt(Math.floor(Math.random()*t.length))}).join("")}ctx.fillStyle="#EEE",ctx.font="70px Lucida Console",text="This "+menuFirstWord,ctx.fillText(text,350,150),text="has a "+menuSecondWord+" "+menuThirdWord,ctx.fillText(text,190,250),ctx.fillStyle="#0F0",ctx.font="20px Arial",ctx.fillText("PLAY",canvasW/2-25,canvasH-125),ctx.fillStyle="#FFF",ctx.font="12px Arial",ctx.fillText("By Infernet89",canvasW-75,canvasH-5),ctx.fillText("Made for JS13k Competition",5,canvasH-5)}else if(1==level){++animationProgress>180&&drawSolutionPoint(solutionObject),toWrite="This",toWrite=toWrite.substring(0,animationProgress/2),ctx.fillStyle="#FFF",ctx.font="40px Arial",ctx.fillText(toWrite,150,250),toWrite="little",toWrite=toWrite.substring(0,animationProgress/2-8),ctx.font="20px Arial",ctx.fillText(toWrite,240,250),toWrite="game",toWrite=toWrite.substring(0,animationProgress/2-16),ctx.font="40px Arial",ctx.fillText(toWrite,290,250),toWrite="is gonna",toWrite=toWrite.substring(0,animationProgress/2-24),ctx.font="40px Arial",ctx.fillText(toWrite,150,330),ctx.fillStyle="#F00",ctx.font="90px Arial",animationProgress>70&&ctx.fillText("Hurt",150,450),ctx.fillStyle="#FFF",ctx.font="40px Arial",animationProgress>90&&ctx.fillText("your",350,450),ctx.fillStyle="#0F0",ctx.font="90px Arial",animationProgress>110?ctx.fillText("BRAIN!",450,450):dragging=!1,ctx.font="18px Arial";for(i in movableObjects)o=movableObjects[i],(o.x+o.dx>canvasW-10||o.x+o.dx<10)&&(o.dx*=-1),(o.y+o.dy+60>canvasH-10||o.y+o.dy<10)&&(o.dy*=-1),o.x+=o.dx,o.y+=o.dy,o.dx*=.95,o.dy*=.95,--o.stoppingDelay<0&&(o.dx=rand(-10,10),o.dy=rand(-10,10),o.stoppingDelay=rand(0,300)),ctx.fillText(o.char,o.x,o.y)}else if(2==level){if(ctx.fillStyle="#777",ctx.font="24px Arial",ctx.fillText("They said that in life, only three things really matter..",300,350),ctx.fillText("          You know that there is a fourth one.",300,450),(solutionObject.x+solutionObject.dx>canvasW-solutionObject.sizeX||solutionObject.x+solutionObject.dx<0)&&(solutionObject.dx*=-1),(solutionObject.y+solutionObject.dy>canvasH||solutionObject.y+solutionObject.dy<solutionObject.sizeY)&&(solutionObject.dy*=-1),--animationProgress>0){if(dragging=!1,animationProgress>33){solutionObject.x+=solutionObject.dx,solutionObject.y+=solutionObject.dy;for(i in movableObjects){o=movableObjects[i],distanceFrom(o,solutionObject)<60&&(o.dx=(o.x-solutionObject.x)/3,o.dy=(o.y-solutionObject.y)/3);for(k in movableObjects)i!=k&&(o2=movableObjects[k],distanceFrom(o,o2)<100&&(o.dx=100/(o.x-o2.x),o.dy=100/(o.y-o2.y)));(o.x+o.dx>canvasW||o.x+o.dx<60)&&(o.dx*=-1),(o.y+o.dy+60>canvasH||o.y+o.dy<60)&&(o.dy*=-1),o.x+=o.dx,o.y+=o.dy,o.dx*=.95,o.dy*=.95,Math.abs(o.dx)<.5&&(o.dx=0),Math.abs(o.dy)<.5&&(o.dy=0)}}}else animationProgress>-25?solutionObject.alpha=1:(solutionObject.alpha=0+repetition,animationProgress=rand(100,600),solutionObject.dx=rand(-5,5),solutionObject.dy=rand(-5,5),repetition+=.005);for(i in movableObjects)o=movableObjects[i],ctx.fillStyle=o.color,ctx.beginPath(),ctx.arc(o.x,o.y,50,0,2*Math.PI,!1),ctx.fill(),ctx.lineWidth=.5,ctx.stroke(),ctx.closePath(),ctx.fillStyle="#000","time"==o.kind?(ctx.font="80px Arial",ctx.fillText("⧗",o.x-20,o.y+25)):"love"==o.kind?(ctx.font="60px Arial",ctx.fillText("❤",o.x-30,o.y+25)):(ctx.font="80px Arial",ctx.fillText("☺",o.x-40,o.y+25));drawSolutionPoint(solutionObject)}else if(3==level){for(ctx.fillStyle="#777",ctx.font="24px Arial",ctx.fillText("They'll try to distract you.",400,100),ctx.font="40px Webdings",i=0;i<canvasW/40;i++)for(k=0;k<canvasH/40-5;k++)ctx.fillStyle=randomPlaces[i][k].color,ctx.fillText(randomPlaces[i][k].char,40*i,canvasH-40*k-10);drawSolutionPoint(solutionObject)}else if(4==level){ctx.fillStyle="#777",ctx.font="24px Arial",ctx.fillText("       But if you stop and think,",200,250),ctx.fillText("you will understand what you really need.",200,300),ctx.fillStyle="#888",ctx.fillRect(930,160,140,460),ctx.beginPath(),ctx.fillStyle="#100",ctx.arc(1e3,230,50,0,2*Math.PI,!1),ctx.fill(),ctx.beginPath(),ctx.fillStyle="#110",ctx.arc(1e3,390,50,0,2*Math.PI,!1),ctx.fill(),ctx.beginPath(),ctx.fillStyle="#010",ctx.arc(1e3,550,50,0,2*Math.PI,!1),ctx.fill(),animationProgress<200?(ctx.fillStyle="#A00",ctx.beginPath(),ctx.arc(1e3,230,50,0,2*Math.PI,!1),ctx.fill(),ctx.lineWidth=.5,ctx.strokeStyle="#FFF",ctx.stroke(),ctx.closePath(),mousex==oldmousex&&mousey==oldmousey?animationProgress++:animationProgress=0):animationProgress<300?(ctx.fillStyle="#AA0",ctx.beginPath(),ctx.arc(1e3,390,50,0,2*Math.PI,!1),ctx.fill(),ctx.lineWidth=.5,ctx.strokeStyle="#FFF",ctx.stroke(),ctx.closePath(),mousex==oldmousex&&mousey==oldmousey?animationProgress++:animationProgress=0):animationProgress&&(solutionObject.x=950,drawSolutionPoint(solutionObject)),ctx.fillStyle="#FFF",ctx.font="24px Arial";for(i in movableObjects)o=movableObjects[i],o.x+=o.dx,o.x<-50?(o.x=canvasW+50,o.char=carPossibilities[rand(0,carPossibilities.length-1)],o.dx=rand(-20,20)):o.x>canvasW+50&&(o.x=-50,o.dx=rand(-20,20),o.char=carPossibilities[rand(0,carPossibilities.length-1)]),ctx.fillText(o.char,o.x,o.y);oldmousex=mousex,oldmousey=mousey}else if(5==level){ctx.fillStyle="#777",ctx.font="24px Arial",ctx.fillText("There are some cheap imitation of that.",370,220),ctx.fillText("      But you need the original.",370,270),dragging||(selectedObject=null),null!=selectedObject&&(selectedObject.x=mousex,selectedObject.y=mousey),drawSolutionPoint(solutionObject),ctx.save(),ctx.compositeOperation="lighter";for(i in movableObjects)o=movableObjects[i],ctx.globalAlpha=o.alpha,ctx.fillStyle=o.color,ctx.beginPath(),ctx.arc(o.x,o.y,o.sizeX,0,2*Math.PI,!1),ctx.fill(),ctx.closePath(),null==selectedObject&&mousex>o.x-o.sizeX&&mousex<o.x+o.sizeX&&mousey>o.y-o.sizeY&&mousey<o.y+o.sizeY&&(selectedObject=o),"#0A0"==o.color&&(dist=Math.sqrt((o.x-solutionObject.x-solutionObject.sizeX/2)*(o.x-solutionObject.x-solutionObject.sizeX/2)+(o.y-solutionObject.y+solutionObject.sizeY/2)*(o.y-solutionObject.y+solutionObject.sizeY/2)),cannotSolve=!(dist<5));ctx.restore()}else if(6==level){ctx.fillStyle="#777",ctx.font="24px Arial",ctx.fillText("And you need it now.",900,750),ctx.fillStyle="#EEE",ctx.font="60px Arial",toWrite="In the jungle,",toWrite=toWrite.substring(0,animationProgress/2-24),ctx.fillText(toWrite,350,270),toWrite="you must wait,",toWrite=toWrite.substring(0,animationProgress/2-51),ctx.fillText(toWrite,350,360),toWrite="until the time read 5 or 8.",toWrite=toWrite.substring(0,animationProgress/2-78),ctx.fillText(toWrite,350,450);var e=new Date;time=e.getHours()+""+e.getMinutes()+e.getSeconds(),solutionObject.color=cannotSolve?"#A00":"#0F0",o=movableObjects[0],mousex>o.x&&mousex<o.x+o.sizeX&&mousey>o.y&&mousey<o.y+o.sizeY?(solutionObject.color="#0F0",(time.includes("5")||time.includes("8"))&&(cannotSolve=!1)):time.includes("5")||time.includes("8")||(cannotSolve=!0),drawSolutionPoint(solutionObject),animationProgress++}else if(7==level){ctx.fillStyle="#777",ctx.font="24px Arial",ctx.fillText("Without silly games..",900,750),ctx.fillStyle="#EEE",ctx.font="60px Arial",0==animationProgress?ctx.fillText("Which door has what are you looking for?",50,150):1==animationProgress?ctx.fillText("Not this. Want to change your mind?",50,150):2==animationProgress?ctx.fillText("Wrong decision.",50,150):3==animationProgress&&ctx.fillText("Smart move!",50,150);for(i in movableObjects)if(o=movableObjects[i],ctx.fillStyle="#29180f",ctx.fillRect(o.x,o.y,o.sizeX,o.sizeY),o.isClosed?(ctx.fillStyle="#874e32",ctx.fillRect(o.x+5,o.y+5,o.sizeX-10,o.sizeY-10),ctx.fillStyle="#29180f",ctx.beginPath(),ctx.arc(o.x+o.sizeX-20,o.y+o.sizeY/2,10,0,2*Math.PI,!1),ctx.fill()):(ctx.fillStyle="#000",ctx.fillRect(o.x+5,o.y+5,o.sizeX-10,o.sizeY-10),ctx.fillStyle="#874e32",ctx.fillRect(o.x-5,o.y+5,10,o.sizeY-10),ctx.fillStyle="#29180f",ctx.fillRect(o.x-15,o.y+o.sizeY/2-10,10,20),1==animationProgress?(ctx.fillStyle="#F00",ctx.font="99px Arial",ctx.fillText("🐐",o.x+10,o.y+o.sizeY/2+30)):2==animationProgress?(ctx.fillStyle="#F00",ctx.font="99px Arial",ctx.fillText("🐐",o.x+10,o.y+o.sizeY/2+30)):3==animationProgress&&i!=solutionDoor&&(ctx.fillStyle="#F00",ctx.font="99px Arial",ctx.fillText("🐐",o.x+10,o.y+o.sizeY/2+30))),ctx.closePath(),0==animationProgress){if(dragging&&mousex>o.x&&mousex<o.x+o.sizeX&&mousey>o.y&&mousey<o.y+o.sizeY){firstDoorChoiche=i;do{r=rand(0,2)}while(r==i);movableObjects[r].isClosed=!1,animationProgress=1,inputDelay=30}}else if(1==animationProgress){if(dragging&&mousex>o.x&&mousex<o.x+o.sizeX&&mousey>o.y&&mousey<o.y+o.sizeY&&o.isClosed)if(i==firstDoorChoiche){o.isClosed=!1,animationProgress=2,sol=-1;do{sol++}while(!movableObjects[sol].isClosed);solutionObject.x=movableObjects[sol].x+movableObjects[sol].sizeX/2-45,solutionObject.y=movableObjects[sol].y+movableObjects[sol].sizeY/2+40,solutionObject.alpha=0,cannotSolve=!0}else animationProgress=3,o.isClosed=!1,solutionDoor=i,solutionObject.x=movableObjects[i].x+movableObjects[i].sizeX/2-45,solutionObject.y=movableObjects[i].y+movableObjects[i].sizeY/2+40,solutionObject.alpha=1,solutionObject.color="#0F0",cannotSolve=!1,dragging=!1,inputDelay=30}else 2==animationProgress&&dragging&&mousex>o.x&&mousex<o.x+o.sizeX&&mousey>o.y&&mousey<o.y+o.sizeY&&o.isClosed&&(o.isClosed=!1,solutionObject.alpha=.8,solutionObject.color="#A00",inputDelay=30,dragging=!1);2==animationProgress&&dragging&&mousex>solutionObject.x&&mousex<solutionObject.x+solutionObject.sizeX&&mousey>solutionObject.y-solutionObject.sizeY&&mousey<solutionObject.y&&solutionObject.alpha>.5&&(generateLevel(),inputDelay=30),drawSolutionPoint(solutionObject)}else if(8==level){ctx.fillStyle="#777",ctx.font="24px Arial",ctx.fillText("Without dirty tricks..",900,750);var l=new Object;l.x=200,l.y=160,l.sizeX=250,l.sizeY=500;var s=new Object;s.x=700,s.y=160,s.sizeX=250,s.sizeY=500,ctx.strokeStyle="#F00",ctx.lineWidth=20,ctx.strokeRect(l.x,l.y,l.sizeX,l.sizeY),ctx.strokeRect(s.x,s.y,s.sizeX,s.sizeY),insideFirst=!1,insideSecond=!1,mousex>l.x-15&&mousex<l.x+l.sizeX+15&&mousey>l.y-15&&mousey<l.y+l.sizeY+15&&(mousex<l.x+40||mousex>l.x+l.sizeX-40||mousey<l.y+40||mousey>l.y+l.sizeY-40)?(solutionObject.x=800,solutionObject.y=410):mousex>s.x-15&&mousex<s.x+s.sizeX+15&&mousey>s.y-15&&mousey<s.y+s.sizeY+15&&(mousex<s.x+40||mousex>s.x+s.sizeX-40||mousey<s.y+40||mousey>s.y+s.sizeY-40)?(solutionObject.x=300,solutionObject.y=410):mousex>l.x-15&&mousex<l.x+l.sizeX+15&&mousey>l.y-15&&mousey<l.y+l.sizeY+15?insideFirst=!0:mousex>s.x-15&&mousex<s.x+s.sizeX+15&&mousey>s.y-15&&mousey<s.y+s.sizeY+15&&(insideSecond=!0),mx=prevMousex,my=prevMousey,-1!=mx&&-1!=my&&(!insideFirst||mx>l.x-15&&mx<l.x+l.sizeX+15&&my>l.y-15&&my<l.y+l.sizeY+15||(solutionObject.x=800,solutionObject.y=410),!insideSecond||mx>s.x-15&&mx<s.x+s.sizeX+15&&my>s.y-15&&my<s.y+s.sizeY+15||(solutionObject.x=300,solutionObject.y=410)),prevMousex=mousex,prevMousey=mousey,drawSolutionPoint(solutionObject)}else 9==level?(drawSolutionPoint(solutionObject),ctx.fillStyle="#874e32",ctx.fillRect(300,canvasH-100,20,100),ctx.fillRect(900,canvasH-100,20,100),ctx.fillStyle="#29180f",ctx.fillRect(100,canvasH-105,1e3,5),ctx.fillRect(100,105,5,canvasH-205),ctx.fillRect(1100,105,5,canvasH-205),ctx.fillRect(100,105,1e3,5),ctx.fillStyle="#FFF",ctx.font="10px Arial",ctx.fillText("Loading ad....",110,120),navigator.onLine&&++animationProgress>40?(cannotSolve=!0,ctx.fillStyle="#CCC",ctx.fillRect(105,110,995,585),ctx.font="180px Arial",ctx.fillStyle="#7f41f1",ctx.fillText("Totally fake",150,300),ctx.font="130px Arial",animationProgress/7%5>2&&ctx.fillText("ADVERTISING",155,500),ctx.fillStyle="#000",ctx.font="30px Arial",ctx.fillText("Want to play more of my games? Find them, by yourself.",150,600),ctx.save(),ctx.translate(940,605),ctx.rotate(9*animationProgress*Math.PI/180),ctx.fillText("🐐",0,0),ctx.restore(),ctx.save(),ctx.translate(1055,150),ctx.rotate(-5*animationProgress*Math.PI/180),ctx.fillText("⛲",0,0),ctx.restore(),ctx.save(),ctx.translate(135,650),ctx.rotate(-25*animationProgress*Math.PI/180),ctx.fillText("⛽",0,0),ctx.restore(),ctx.save(),ctx.translate(675,320),ctx.rotate(3*animationProgress*Math.PI/180),ctx.fillText("⛄",0,0),ctx.restore(),ctx.save(),ctx.translate(140,140),ctx.rotate(animationProgress*Math.PI/180),animationProgress/20%5>2&&ctx.fillText("☕",0,0),ctx.restore()):cannotSolve=!1,ctx.fillStyle="#777",ctx.font="24px Arial",ctx.fillText("Just the pure essence of what are you looking for:",580,750),ctx.fillText("you need to ..",960,780)):10==level&&(animationProgress++,ctx.fillStyle="#777",ctx.font="180px Arial",ctx.fillText("GO OUTSIDE!",10,240),ctx.font="24px Arial",toWrite="You just discovered that being always connected prevents you from reaching your goals.",toWrite=toWrite.substring(0,animationProgress),ctx.fillText(toWrite,50,350),toWrite="Internet can become and addiction.",toWrite=toWrite.substring(0,-86+animationProgress),ctx.fillText(toWrite,50,380),toWrite="Try to live OFFLINE.",toWrite=toWrite.substring(0,-120+animationProgress),ctx.fillText(toWrite,50,410),ctx.fillStyle="#abb",ctx.fillRect(285,425,600,canvasH-440),ctx.fillStyle="#f0af19",ctx.fillRect(285,425,600,5),ctx.fillRect(285,canvasH-15,600,5),ctx.fillRect(285,425,5,canvasH-440),ctx.fillRect(880,425,5,canvasH-440),ctx.font="45px Tiomes New Roman",ctx.fillStyle="#000",ctx.fillText("I've completed a stupid game",330,500),ctx.fillText("with a random title and all I've",315,550),ctx.fillText("got was this stupid certificate.",320,600),ctx.fillText("  🎀CONGRATULATIONS🎀",290,750),document.title=mousex+" "+mousey);drawHUD(solutionObject),mousex>solutionObject.x&&mousex<solutionObject.x+solutionObject.sizeX&&mousey>solutionObject.y-solutionObject.sizeY&&mousey<solutionObject.y&&!cannotSolve?(document.body.style.cursor="pointer",dragging&&(level++,generateLevel())):document.body.style.cursor="default"}function rand(t,e){return t>e?rand(e,t):(e+=1,Math.floor(Math.random()*(e-t)+t))}function distanceFrom(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}function cliccatoMouse(t){dragging=!0;var e=canvas.getBoundingClientRect();mousex=(t.clientX-e.left)/(e.right-e.left)*canvasW,mousey=(t.clientY-e.top)/(e.bottom-e.top)*canvasH}function mossoMouse(t){var e=canvas.getBoundingClientRect();mousex=(t.clientX-e.left)/(e.right-e.left)*canvasW,mousey=(t.clientY-e.top)/(e.bottom-e.top)*canvasH}function rilasciatoMouse(t){dragging=!1}function sparitoMouse(t){mousex=mousey=-1}canvas.addEventListener("mousemove",mossoMouse),canvas.addEventListener("mousedown",cliccatoMouse),canvas.addEventListener("mouseup",rilasciatoMouse),window.addEventListener("blur",sparitoMouse),level=0,generateLevel(),activeTask=setInterval(run,33),window.AutoScaler=function(t,e,o,i){var l=this;this.viewportWidth=0,this.viewportHeight=0,"string"==typeof t&&(t=document.getElementById(t)),this.element=t,this.gameAspect=e/o,this.skewAllowance=i||0,this.checkRescale=function(){if(window.innerWidth!=l.viewportWidth||window.innerHeight!=l.viewportHeight){var t=window.innerWidth,e=window.innerHeight,o=t/e,i=0,s=0;i=t,s=e,Math.abs(o-l.gameAspect)>l.skewAllowance&&(o<l.gameAspect?s=t/l.gameAspect:i=e*l.gameAspect),l.element.style.width=i+"px",l.element.style.height=s+"px",l.element.style.marginLeft=(t-i)/2+"px",l.element.style.marginTop=(e-s)/2+"px",l.viewportWidth=t,l.viewportHeight=e}},l.element.style.display="block",l.element.style.margin="0",l.element.style.padding="0",window.addEventListener("resize",this.checkRescale),rescalercheck=setInterval(this.checkRescale,1500)};